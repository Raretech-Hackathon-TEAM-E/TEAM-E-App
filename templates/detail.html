<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>chatroom</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href=""
    />
  </head>

 <header></header>

  <body>
    <div class="main-countainer">
      <div class="chat-box">
        <div id="chat-header">
          <!--チャンネルタイトル、if文-->
          <p id="channelroom-name">{{ channel.channel_name }}</p>
          {% if channel.abstract is not none %}
            <p id="chatroom-description">{{ channel.abstract }}</p>
          {% endif %}
          {% if uid == channel.uid %}
          <button id="">Edit</button>
           {% include 'modal/update-channel.html' %}
          {% endif %}
        </div>
        <div id="message-area">
          <!--メッセージ一覧取得if文-->
          {% if messages|length > 0 %}
            {% for message in messages %}
              {% if message.uid == uid %}
                <div class="my-messages">
                  <button id="">Repost</button>
                    {% include 'modal/リポスト.html' %}
                  <form action="/delete_message" method="post">
                    <input type="hidden" value="{{ channel.cid }}" name="channel_id" />
                    <button class="delete-message-btn" name="message_id" value="{{ message.mid }}">
                      <!--ゴミ箱アイコン-->
                    </button>
                  </form>
                 {% if message.repost_message is not none and message.repost_mark is not none%}
                  <p class="box box-right ">{{ message.message }}</p>
                  <p class="repostbox"></p>
                  <p class="mark"></p>
                 {% elif message.repost_message is not none %}
                  <p class="box box-right ">{{ message.message }}</p>
                  <p class="repostbox"></p>
                 {% else %}
                 <p class="box box-right">{{ message.message }}</p>  
                 {% endif %}
                </div>
                <div class="messages">
              {% elif message.repost_message is not none and message.repost_mark is not none%}
                  <p class="user-name">{{ message.user_name }}</p>
                  <p class="box box-left ">{{ message.message }}</p>
                  <p class="repostbox"></p>
                  <p class="mark"></p>
              {% elif message.repost_message is not none %}
                  <p class="user-name">{{ message.user_name }}</p>
                  <p class="box box-left ">{{ message.message }}</p>
                  <p class="repostbox"></p>
              {% else %}
                  <p class="user-name">{{ message.user_name }}</p>
                  <p class="box box-left">{{ message.message }}</p>  
                </div>
              {% endif %}
            {% endfor %}
          {% else %}
          <p>誰も喋っていません</p>
          {% endif %}
        </div>
        <div class="typing-box-wrapper">
          <!--入力フォーム-->
          <form class="typing-box" action="/message" method="POST">
            <textarea name="message" id="message" autofocus></textarea>
            <input type="hidden" name="channel_id" value="{{ channel.id }}" />
            <button type="submit" id="add-message-btn">
              <ion-icon name="paper-plane"></ion-icon>
            </button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>